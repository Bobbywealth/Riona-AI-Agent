<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riona - Instagram Automation</title>
    <style>
        :root {
            --sidebar-bg: #2d2d3a;
            --sidebar-hover: #3d3d4a;
            --sidebar-active: #4a4a5a;
            --main-bg: #f5f5f5;
            --card-bg: #ffffff;
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-muted: #999999;
            --accent: #c0392b;
            --accent-light: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --border: #e0e0e0;
            --toggle-on: #27ae60;
            --toggle-off: #c0392b;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--main-bg);
            min-height: 100vh;
            display: flex;
        }
        
        /* Sidebar */
        .sidebar {
            width: 200px;
            background: var(--sidebar-bg);
            min-height: 100vh;
            padding: 20px 0;
            flex-shrink: 0;
        }
        
        .profile-section {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .profile-pic {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
            border: 3px solid rgba(255,255,255,0.2);
        }
        
        .profile-name {
            color: white;
            font-size: 14px;
            font-weight: 600;
        }
        
        .profile-status {
            color: var(--success);
            font-size: 11px;
            margin-top: 4px;
        }
        
        .profile-status.offline { color: var(--accent); }
        
        .nav-menu { list-style: none; }
        
        .nav-item {
            padding: 12px 25px;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .nav-item:hover {
            background: var(--sidebar-hover);
            color: white;
        }
        
        .nav-item.active {
            background: var(--sidebar-active);
            color: white;
            border-left-color: var(--accent);
        }
        
        .nav-icon { width: 20px; text-align: center; }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }
        
        /* Status Bar */
        .status-bar {
            background: white;
            padding: 12px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }
        
        .countdown {
            color: var(--success);
            font-weight: 600;
            font-size: 14px;
        }
        
        .status-message {
            background: #fff3cd;
            color: #856404;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 13px;
            flex: 1;
            margin: 0 20px;
            text-align: center;
        }
        
        .status-message.success { background: #d4edda; color: #155724; }
        .status-message.error { background: #f8d7da; color: #721c24; }
        
        .logout-btn {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 13px;
            cursor: pointer;
            background: none;
            border: none;
        }
        
        .logout-btn:hover { color: var(--accent); }
        
        /* Content Area */
        .content-wrapper {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .center-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        /* Right Sidebar */
        .right-sidebar {
            width: 280px;
            background: white;
            border-left: 1px solid var(--border);
            padding: 20px;
            overflow-y: auto;
        }
        
        .activity-section { margin-bottom: 25px; }
        
        .activity-title {
            color: var(--accent);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 13px;
            color: var(--text-primary);
        }
        
        .activity-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            margin-bottom: 20px;
            color: var(--text-primary);
            font-size: 16px;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }
        
        /* Control Row */
        .control-row {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .control-row:last-child { border-bottom: none; }
        
        .control-label {
            width: 100px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .control-toggle { margin-right: 20px; }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-off);
            transition: 0.3s;
            border-radius: 26px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--toggle-on);
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .control-count {
            width: 60px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            color: var(--text-primary);
        }
        
        .control-slider-wrap {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-slider-label {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
        }
        
        .control-slider {
            flex: 1;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
        }
        
        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4a90d9;
            cursor: pointer;
        }
        
        /* Speed Controls */
        .speed-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .speed-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            background: #e0e0e0;
            color: var(--text-secondary);
        }
        
        .speed-btn:hover { background: #d0d0d0; }
        .speed-btn.active { background: var(--accent); color: white; }
        
        /* Form Elements */
        .form-group { margin-bottom: 16px; }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 13px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        /* Buttons */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary { background: var(--success); color: white; }
        .btn-primary:hover { background: #219a52; }
        .btn-secondary { background: #3498db; color: white; }
        .btn-secondary:hover { background: #2980b9; }
        .btn-danger { background: var(--accent); color: white; }
        .btn-danger:hover { background: #a93226; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        
        /* Logs */
        .logs-list {
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            background: #1e1e1e;
            border-radius: 6px;
            padding: 15px;
        }
        
        .log-entry {
            padding: 6px 0;
            border-bottom: 1px solid #333;
            color: #d4d4d4;
            display: flex;
            gap: 10px;
        }
        
        .log-time { color: #888; flex-shrink: 0; }
        
        .log-level {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .log-level.info { background: #0d47a1; color: white; }
        .log-level.warn { background: #f57c00; color: white; }
        .log-level.error { background: #c62828; color: white; }
        
        .log-message { flex: 1; word-break: break-word; }
        
        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .log-filter-btn {
            padding: 6px 14px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .log-filter-btn:hover { background: #f5f5f5; }
        .log-filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        
        /* Section visibility */
        .section { display: none; }
        .section.active { display: block; }
        
        /* Spinner */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar { width: 60px; }
            .profile-name, .profile-status { display: none; }
            .profile-pic { width: 40px; height: 40px; font-size: 18px; }
            .nav-item { padding: 12px; justify-content: center; }
            .nav-item span:not(.nav-icon) { display: none; }
            .right-sidebar { display: none; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 12px;
        }
        
        /* Chart placeholder */
        .chart-area {
            height: 150px;
            background: linear-gradient(to right, #f8f8f8, #fff);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 14px;
            border: 1px dashed var(--border);
            margin-bottom: 20px;
        }
        
        /* Checkbox group */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        .hidden { display: none !important; }
        
        /* Proxy status colors */
        .proxy-success { color: var(--success); }
        .proxy-error { color: var(--accent); }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="profile-section">
            <div class="profile-pic" id="profilePic">R</div>
            <div class="profile-name" id="profileName">Not logged in</div>
            <div class="profile-status offline" id="profileStatus">Offline</div>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" onclick="showSection('dashboard')">
                <span class="nav-icon">üìä</span><span>Dashboard</span>
            </li>
            <li class="nav-item" onclick="showSection('automation')">
                <span class="nav-icon">ü§ñ</span><span>Automation</span>
            </li>
            <li class="nav-item" onclick="showSection('targeting')">
                <span class="nav-icon">üéØ</span><span>Targeting</span>
            </li>
            <li class="nav-item" onclick="showSection('logs')">
                <span class="nav-icon">üìã</span><span>Logs</span>
            </li>
            <li class="nav-item" onclick="showSection('settings')">
                <span class="nav-icon">‚öôÔ∏è</span><span>Settings</span>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Status Bar -->
        <div class="status-bar">
            <span class="countdown" id="countdown">Ready</span>
            <div class="status-message" id="statusMessage">Welcome! Go to Settings to login.</div>
            <button class="logout-btn" id="logoutBtn" onclick="logout()" style="display: none;">Logout</button>
        </div>

        <div class="content-wrapper">
            <div class="center-content">
                <!-- Dashboard Section -->
                <div id="section-dashboard" class="section active">
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-number" id="statFollows">0</div>
                            <div class="stat-label">Follows Today</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="statLikes">0</div>
                            <div class="stat-label">Likes Today</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="statComments">0</div>
                            <div class="stat-label">Comments Today</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="statStories">0</div>
                            <div class="stat-label">Stories Viewed</div>
                        </div>
                    </div>
                    
                    <div class="chart-area">üìà Follower growth chart will appear here after activity</div>
                    
                    <div class="card">
                        <div class="control-row">
                            <span class="control-label">Follow</span>
                            <label class="toggle-switch control-toggle">
                                <input type="checkbox" id="toggleFollow">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="control-count">0</span>
                            <div class="control-slider-wrap">
                                <span class="control-slider-label">Follows/day:</span>
                                <input type="range" class="control-slider" id="sliderFollow" min="10" max="200" value="100">
                                <span id="sliderFollowVal">100</span>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <span class="control-label">DM</span>
                            <label class="toggle-switch control-toggle">
                                <input type="checkbox" id="toggleDM">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="control-count">0</span>
                            <div class="control-slider-wrap">
                                <span class="control-slider-label">DMs/day:</span>
                                <input type="range" class="control-slider" id="sliderDM" min="5" max="50" value="10">
                                <span id="sliderDMVal">10</span>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <span class="control-label">Unfollow</span>
                            <label class="toggle-switch control-toggle">
                                <input type="checkbox" id="toggleUnfollow">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="control-count">0</span>
                            <div class="control-slider-wrap">
                                <span class="control-slider-label">Unfollows/day:</span>
                                <input type="range" class="control-slider" id="sliderUnfollow" min="10" max="200" value="100">
                                <span id="sliderUnfollowVal">100</span>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <span class="control-label">Like</span>
                            <label class="toggle-switch control-toggle">
                                <input type="checkbox" id="toggleLike" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="control-count">0</span>
                            <div class="control-slider-wrap">
                                <span class="control-slider-label">Likes/day:</span>
                                <input type="range" class="control-slider" id="sliderLike" min="20" max="300" value="100">
                                <span id="sliderLikeVal">100</span>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <span class="control-label">Stories</span>
                            <label class="toggle-switch control-toggle">
                                <input type="checkbox" id="toggleStories" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="control-count">0</span>
                            <div class="control-slider-wrap">
                                <span class="control-slider-label">Stories/day:</span>
                                <input type="range" class="control-slider" id="sliderStories" min="50" max="500" value="200">
                                <span id="sliderStoriesVal">200</span>
                            </div>
                        </div>
                        
                        <div class="speed-controls">
                            <button class="speed-btn" onclick="setSpeed('slow')">Slow</button>
                            <button class="speed-btn active" onclick="setSpeed('medium')">Medium</button>
                            <button class="speed-btn" onclick="setSpeed('fast')">Fast</button>
                        </div>
                    </div>
                </div>
                
                <!-- Automation Section -->
                <div id="section-automation" class="section">
                    <div class="card">
                        <h3>ü§ñ Automation Actions</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 30px;">
                            <button class="btn btn-secondary" onclick="startInteraction('like')">‚ù§Ô∏è Start Liking</button>
                            <button class="btn btn-secondary" onclick="startInteraction('comment')" style="background: #9b59b6;">üí¨ Start Commenting</button>
                            <button class="btn btn-primary" onclick="startInteraction('follow')">üë• Start Following</button>
                            <button class="btn btn-secondary" onclick="viewStories()" style="background: #e67e22;">üìñ View Stories</button>
                        </div>
                        
                        <h3>Campaign Settings</h3>
                        <div class="form-group">
                            <label>Target Username</label>
                            <input type="text" class="form-input" id="targetUsername" placeholder="@username to interact with their followers">
                        </div>
                        <div class="form-group">
                            <label>Max Posts to Process</label>
                            <input type="number" class="form-input" id="maxPosts" value="10" min="1" max="50">
                        </div>
                        <button class="btn btn-primary" onclick="startCampaign()">üöÄ Start Campaign</button>
                    </div>
                </div>
                
                <!-- Targeting Section -->
                <div id="section-targeting" class="section">
                    <div class="card">
                        <h3>üéØ Targeting Options</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <div class="form-group">
                                    <label>Target Accounts</label>
                                    <input type="text" class="form-input" id="targetAccounts" placeholder="Enter username, press Enter">
                                </div>
                                <div id="accountsList" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>Target Hashtags</label>
                                    <input type="text" class="form-input" id="targetHashtags" placeholder="Enter hashtag, press Enter">
                                </div>
                                <div id="hashtagsList" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                            </div>
                        </div>
                        
                        <h3 style="margin-top: 30px;">Follower Filters</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Min Followers</label>
                                <input type="number" class="form-input" id="minFollowers" value="100" min="0">
                            </div>
                            <div class="form-group">
                                <label>Max Followers</label>
                                <input type="number" class="form-input" id="maxFollowers" value="10000" min="0">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Logs Section -->
                <div id="section-logs" class="section">
                    <div class="card">
                        <div class="logs-header">
                            <div style="display: flex; gap: 10px;">
                                <button class="log-filter-btn active" onclick="filterLogs('all', this)">All</button>
                                <button class="log-filter-btn" onclick="filterLogs('info', this)">Info</button>
                                <button class="log-filter-btn" onclick="filterLogs('warn', this)">Warning</button>
                                <button class="log-filter-btn" onclick="filterLogs('error', this)">Error</button>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="log-filter-btn" onclick="refreshLogs()">üîÑ Refresh</button>
                                <button class="log-filter-btn" onclick="downloadLogs()">‚¨áÔ∏è Download</button>
                            </div>
                        </div>
                        <div class="logs-list" id="logsList">
                            <div class="log-entry">
                                <span class="log-time">--:--:--</span>
                                <span class="log-level info">INFO</span>
                                <span class="log-message">Loading logs...</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div id="section-settings" class="section">
                    <div class="card" style="max-width: 500px;">
                        <h3>üîê Instagram Login</h3>
                        <div class="form-group">
                            <label>Username</label>
                            <input type="text" class="form-input" id="loginUsername" placeholder="Your Instagram username">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" class="form-input" id="loginPassword" placeholder="Your Instagram password">
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="rememberMe" checked>
                            <label style="margin: 0;">Remember me for 7 days</label>
                        </div>
                        <button class="btn btn-primary" id="loginBtn" onclick="login()" style="width: 100%;">
                            üîì Login to Instagram
                        </button>
                    </div>
                    
                    <div class="card" style="max-width: 500px; margin-top: 20px;">
                        <h3>üåê Proxy Settings</h3>
                        <p style="color: var(--text-muted); font-size: 13px; margin-bottom: 15px;">
                            Using a proxy helps avoid Instagram rate limits and IP blocks.
                        </p>
                        <div class="checkbox-group">
                            <input type="checkbox" id="proxyEnabled" onchange="toggleProxyFields()">
                            <label style="margin: 0;">Enable Proxy</label>
                        </div>
                        <div id="proxyFields" class="hidden">
                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                                <div class="form-group">
                                    <label>Proxy Host</label>
                                    <input type="text" class="form-input" id="proxyHost" placeholder="proxy.example.com">
                                </div>
                                <div class="form-group">
                                    <label>Port</label>
                                    <input type="text" class="form-input" id="proxyPort" placeholder="8080">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div class="form-group">
                                    <label>Username (optional)</label>
                                    <input type="text" class="form-input" id="proxyUsername" placeholder="proxy username">
                                </div>
                                <div class="form-group">
                                    <label>Password (optional)</label>
                                    <input type="password" class="form-input" id="proxyPassword" placeholder="proxy password">
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-secondary" onclick="saveProxy()">üíæ Save Proxy</button>
                                <button class="btn btn-secondary" onclick="testProxy()" style="background: #9b59b6;">üîç Test Proxy</button>
                            </div>
                            <div id="proxyTestResult" style="margin-top: 15px; padding: 10px; border-radius: 6px; display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="right-sidebar">
                <div class="activity-section">
                    <h3 class="activity-title">Viewed Stories</h3>
                    <div id="viewedStories" class="empty-state">No stories viewed yet</div>
                </div>
                <div class="activity-section">
                    <h3 class="activity-title">Liked Posts</h3>
                    <div id="likedPosts" class="empty-state">No posts liked yet</div>
                </div>
                <div class="activity-section">
                    <h3 class="activity-title">Followed Users</h3>
                    <div id="followedUsers" class="empty-state">No users followed yet</div>
                </div>
                <div class="activity-section">
                    <h3 class="activity-title">Recent Comments</h3>
                    <div id="recentComments" class="empty-state">No comments made yet</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = '';
        let isLoggedIn = false;
        let cachedLogs = [];
        
        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('section-' + sectionId).classList.add('active');
            event.currentTarget.classList.add('active');
            if (sectionId === 'logs') refreshLogs();
        }
        
        // API Helper
        async function apiCall(endpoint, method = 'GET', body = null) {
            try {
                const options = { method, headers: { 'Content-Type': 'application/json' }, credentials: 'include' };
                if (body) options.body = JSON.stringify(body);
                const response = await fetch(API_URL + endpoint, options);
                return await response.json();
            } catch (error) {
                console.error('API Error:', error);
                return { error: error.message };
            }
        }
        
        // Status Check
        async function checkStatus() {
            const result = await apiCall('/api/status');
            isLoggedIn = result.isLoggedIn || false;
            
            const statusEl = document.getElementById('profileStatus');
            const nameEl = document.getElementById('profileName');
            const picEl = document.getElementById('profilePic');
            const logoutBtn = document.getElementById('logoutBtn');
            const statusMsg = document.getElementById('statusMessage');
            
            if (isLoggedIn) {
                statusEl.textContent = 'Online';
                statusEl.classList.remove('offline');
                nameEl.textContent = '@' + (result.username || 'user');
                picEl.textContent = (result.username || 'U')[0].toUpperCase();
                logoutBtn.style.display = 'block';
                statusMsg.textContent = 'Bot is active and ready for automation.';
                statusMsg.className = 'status-message success';
            } else {
                statusEl.textContent = 'Offline';
                statusEl.classList.add('offline');
                nameEl.textContent = 'Not logged in';
                picEl.textContent = 'R';
                logoutBtn.style.display = 'none';
                statusMsg.textContent = 'Go to Settings to login to Instagram.';
                statusMsg.className = 'status-message';
            }
        }
        
        // Login
        async function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            
            const btn = document.getElementById('loginBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Logging in...';
            document.getElementById('statusMessage').textContent = 'Logging in to Instagram... This may take a minute.';
            
            const result = await apiCall('/api/login', 'POST', { 
                username, 
                password, 
                rememberMe: document.getElementById('rememberMe').checked 
            });
            
            btn.disabled = false;
            btn.textContent = 'üîì Login to Instagram';
            
            if (result.error) {
                alert('Login failed: ' + result.error);
                document.getElementById('statusMessage').textContent = 'Login failed: ' + result.error;
                document.getElementById('statusMessage').className = 'status-message error';
            } else {
                localStorage.setItem('savedUsername', username);
                await checkStatus();
                document.querySelector('.nav-item').click();
            }
        }
        
        // Logout
        async function logout() {
            if (!confirm('Are you sure you want to logout?')) return;
            await apiCall('/api/logout', 'POST');
            await checkStatus();
        }
        
        // Speed control
        function setSpeed(speed) {
            document.querySelectorAll('.speed-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        // Slider updates
        document.querySelectorAll('.control-slider').forEach(slider => {
            slider.addEventListener('input', function() {
                document.getElementById(this.id + 'Val').textContent = this.value;
            });
        });
        
        // Interactions
        async function startInteraction(type) {
            if (!isLoggedIn) {
                alert('Please login first');
                showSection('settings');
                return;
            }
            
            const target = document.getElementById('targetUsername').value.trim();
            const maxPosts = parseInt(document.getElementById('maxPosts').value) || 10;
            
            document.getElementById('statusMessage').textContent = `Starting ${type} interaction...`;
            
            const result = await apiCall('/api/interact', 'POST', { targetUsername: target || null, maxPosts, mode: type });
            
            if (result.error) {
                document.getElementById('statusMessage').textContent = 'Error: ' + result.error;
                document.getElementById('statusMessage').className = 'status-message error';
            } else {
                document.getElementById('statusMessage').textContent = result.message || 'Interaction started!';
                document.getElementById('statusMessage').className = 'status-message success';
            }
        }
        
        async function startCampaign() {
            const target = document.getElementById('targetUsername').value.trim();
            if (!target) {
                alert('Please enter a target username');
                return;
            }
            await startInteraction('like');
        }
        
        async function viewStories() {
            if (!isLoggedIn) {
                alert('Please login first');
                return;
            }
            document.getElementById('statusMessage').textContent = 'Viewing stories...';
            const result = await apiCall('/api/stories/view', 'POST');
            document.getElementById('statusMessage').textContent = result.error ? 'Error: ' + result.error : (result.message || 'Stories viewed!');
        }
        
        // Logs
        async function refreshLogs() {
            const result = await apiCall('/api/logs/recent?lines=100');
            if (result.error) return;
            cachedLogs = result.logs || [];
            renderLogs(cachedLogs);
        }
        
        function renderLogs(logs) {
            const container = document.getElementById('logsList');
            if (!logs || logs.length === 0) {
                container.innerHTML = '<div class="log-entry"><span class="log-time">--:--:--</span><span class="log-level info">INFO</span><span class="log-message">No log entries found</span></div>';
                return;
            }
            container.innerHTML = logs.map(log => {
                let timeStr = '--:--:--';
                try { timeStr = log.timestamp.split(' ')[0] || log.timestamp; } catch(e) {}
                return `<div class="log-entry"><span class="log-time">${timeStr}</span><span class="log-level ${log.level}">${log.level.toUpperCase()}</span><span class="log-message">${escapeHtml(log.message)}</span></div>`;
            }).join('');
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function filterLogs(level, btn) {
            document.querySelectorAll('.log-filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderLogs(level === 'all' ? cachedLogs : cachedLogs.filter(l => l.level === level));
        }
        
        function downloadLogs() {
            if (cachedLogs.length === 0) { alert('No logs to download'); return; }
            const text = cachedLogs.map(l => `[${l.timestamp}] [${l.level}] ${l.message}`).join('\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `riona-logs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
        }
        
        // Proxy Settings
        function toggleProxyFields() {
            const enabled = document.getElementById('proxyEnabled').checked;
            const fields = document.getElementById('proxyFields');
            fields.classList.toggle('hidden', !enabled);
        }
        
        async function loadProxySettings() {
            try {
                const result = await apiCall('/api/proxy/status');
                if (result.enabled !== undefined) {
                    document.getElementById('proxyEnabled').checked = result.enabled;
                    document.getElementById('proxyHost').value = result.host || '';
                    document.getElementById('proxyPort').value = result.port || '';
                    document.getElementById('proxyUsername').value = result.username || '';
                    toggleProxyFields();
                }
            } catch (e) {
                console.error('Error loading proxy settings:', e);
            }
        }
        
        async function saveProxy() {
            const result = await apiCall('/api/proxy/configure', 'POST', {
                enabled: document.getElementById('proxyEnabled').checked,
                host: document.getElementById('proxyHost').value.trim(),
                port: document.getElementById('proxyPort').value.trim(),
                username: document.getElementById('proxyUsername').value.trim(),
                password: document.getElementById('proxyPassword').value
            });
            
            const resultEl = document.getElementById('proxyTestResult');
            resultEl.style.display = 'block';
            
            if (result.error) {
                resultEl.textContent = '‚ùå Error: ' + result.error;
                resultEl.style.background = '#f8d7da';
                resultEl.style.color = '#721c24';
            } else {
                resultEl.textContent = '‚úÖ Proxy settings saved! Restart the bot for changes to take effect.';
                resultEl.style.background = '#d4edda';
                resultEl.style.color = '#155724';
            }
        }
        
        async function testProxy() {
            const host = document.getElementById('proxyHost').value.trim();
            const port = document.getElementById('proxyPort').value.trim();
            
            if (!host || !port) {
                alert('Please enter proxy host and port first');
                return;
            }
            
            const resultEl = document.getElementById('proxyTestResult');
            resultEl.style.display = 'block';
            resultEl.textContent = 'üîÑ Testing proxy connection...';
            resultEl.style.background = '#fff3cd';
            resultEl.style.color = '#856404';
            
            const result = await apiCall('/api/proxy/test', 'POST', {
                host,
                port,
                username: document.getElementById('proxyUsername').value.trim(),
                password: document.getElementById('proxyPassword').value
            });
            
            if (result.success) {
                resultEl.textContent = '‚úÖ Proxy connection successful! IP: ' + (result.proxyIp || 'verified');
                resultEl.style.background = '#d4edda';
                resultEl.style.color = '#155724';
            } else {
                resultEl.textContent = '‚ùå Proxy test failed: ' + (result.error || 'Unknown error');
                resultEl.style.background = '#f8d7da';
                resultEl.style.color = '#721c24';
            }
        }
        
        // Init
        window.onload = () => {
            checkStatus();
            loadProxySettings();
            refreshLogs();
            const savedUsername = localStorage.getItem('savedUsername');
            if (savedUsername) document.getElementById('loginUsername').value = savedUsername;
        };
        
        setInterval(checkStatus, 30000);
    </script>
</body>
</html>
